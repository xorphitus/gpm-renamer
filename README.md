# gpm-renamer
Google Play Music から落とした mp3 のファイル名にトラック番号を付与するなど。

これまで Google Play Music で音楽ファイルの管理をしていたがサービス終了のお知らせに至り、後釜の YouTube Music もどうなることかよく分からないため、音楽ファイルは自前の NAS で管理することとした。

しかし Google Play Music からダウンロードした音源はファイルフォーマットが以下のようになるため、ファイルが曲順でソートされず NAS 管理がしにくい。

```
#{アーティスト名} - #{曲名}
```

というわけで、mp3 のメタデータを読み込み以下のフォーマットにリネームするツールを作った。

```
#{トラック番号2桁ゼロ埋め} #{曲名}
```

なお、アルバム毎にディレクトリを作って mp3 ファイルをまとめるのは手動でやってあるものとする。  
さすがにそこまで頑張ってない。  
仮に全ファイルを同一ディレクトリに置いて、それを仕分けするようなプログラムを書いたとしても、同一ファイル名かつ中身が別、というパターンがあり得ると判断したので。  
かと言って、対象アルバム数的にも Google Play Music からのダウンロード込みで全部やってくれるやつを作る気力はなかった。

## 使い方

まずは準備。

```
$ git clone これ
$ cd gpm-renamer
$ cargo build --release
```

そして実行。
複数ファイルをまとめて引数にする機能はないので、`find` + `-exec` する。

```
$ find /path/to/mp3_files -type f -exec target/release/gpm-renamer "{}" \;
```

これにより `find` した配下の mp3 ファイルが全てリネームされる。

また、この `/path/to/mp3_files` は、サブディレクトリを持っていても構わない。  
`/path/to/mp3_files` 内に、アーティスト毎、アルバム毎にサブディレクトリが作られているようなケースも想定済みである。

ちなみに `xargs` を使いたい人は、mp3 ファイル名にはスペースやら `'` が含まれることになるのでその辺に注意すること。
